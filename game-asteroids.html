<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Asteroids Advanced ‚Äì OldWebs Mini Games</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .asteroids-frame {
      margin:30px auto 20px auto;
      background:#181831;
      border:5px double #0ff;
      border-radius:13px;
      box-shadow:0 2px 22px #13e8f855;
      max-width:540px;
      min-width:260px;
      padding:26px 24px 18px 24px;
      display:flex; flex-direction:column; align-items:center;
    }
    #asteroidsCanvas {
      background: #181823;
      margin:0;
      box-shadow:0 0 18px #4ef6, 0 0 0 5px #222 inset;
      border:2px inset #12ff;
      border-radius:12px;
      outline:1px solid #0ff;
      width:460px;
      height:420px;
      display:block;
      margin-bottom: 10px;
      image-rendering: pixelated;
    }
    .asteroids-score {
      color: #ff0;
      background: #26262f;
      font-family: monospace;
      font-size: 1.10em;
      border-radius:3px;
      margin-bottom:14px;
      margin-top:7px;
      padding:3px 10px 2px 10px;
      letter-spacing:2px;
      border: 2px solid #208888;
      box-shadow: 0 0 7px #111B;
      display:inline-block;
    }
    .pixel-btn {margin-top: 7px;}
    .retro-frame {margin-bottom:10px;}
    @media (max-width:550px){
      #asteroidsCanvas { width:95vw !important; height:65vw !important;}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="retro-frame">
      <marquee scrollamount="12" behavior="alternate">
        <span class="blink">ü™ê Asteroids Advanced (Retro) ‚Äì Mini Game ü™ê</span>
      </marquee>
    </div>
    <hr class="pixel-hr">
    <div class="navigation">
      <a href="index.html">üè† HOME</a> |
      <a href="games.html" class="pixel-btn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fb/Terminal_icon_icon.svg/1024px-Terminal_icon_icon.svg.png" width="20" style="vertical-align:middle;margin-right:5px;">
        üéÆ Mini Games
      </a> |
      <a href="chat.html" class="pixel-btn">
        <img src="https://www.gifss.com/computers/old/gifss.com-old-3.gif" width="20" style="vertical-align:middle;margin-right:5px;">
        Retro Chat
      </a> |
      <a href="donate.html" class="pixel-btn">üí∏ Donate</a>
    </div>
    <hr class="pixel-hr" />

    <div class="asteroids-frame">
      <div style="color:#fff36f;font-family:'Consolas';text-align:center;line-height:1.4em;margin-bottom:7px;">
        ‚Üê / ‚Üí or A/D ‚Äì Rotate<br>
        ‚Üë or W ‚Äì Thrust<br>
        Space ‚Äì Shoot<br>
        Survive as long as you can, dodge asteroids & destroy them!
      </div>
      <canvas id="asteroidsCanvas" width="460" height="420"></canvas>
      <div id="asteroidsScore" class="asteroids-score">Score: 0</div>
      <button class="pixel-btn" onclick="resetGame()">Restart</button>
    </div>

    <div align="center" style="margin-top:12px;">
      <img src="https://www.gifss.com/computers/old/gifss.com-old-3.gif" width="32">
      <a href="games.html" class="pixel-btn">‚Üê Back to Mini Games</a>
    </div>
  </div>
  <script>
    const cvs = document.getElementById('asteroidsCanvas'), ctx = cvs.getContext('2d');
    let ship, bullets, asteroids, keys, score, gameOver, particles, frameId;

    function resetGame() {
      ship = { x: cvs.width/2, y: cvs.height/2, r: 0, vx: 0, vy: 0, alive: true };
      bullets = [];
      asteroids = [];
      keys = {};
      score = 0;
      gameOver = false;
      particles = [];
      document.getElementById('asteroidsScore').textContent = "Score: 0";
      spawnAsteroids(6);
      cancelAnimationFrame(frameId);
      gameLoop();
    }
    function spawnAsteroids(n){
      asteroids = [];
      for(let i=0;i<n;i++){
        let r=26+Math.random()*36;
        let angle = Math.random()*2*Math.PI;
        asteroids.push({
          x: Math.random()*cvs.width, y: Math.random()*cvs.height,
          r, vx: Math.cos(angle)*(2+Math.random()*1.6), vy: Math.sin(angle)*(2+Math.random()*1.6), hp: Math.ceil(r/22)
        });
      }
    }
    function drawShip(s) {
      ctx.save();
      ctx.translate(s.x, s.y);
      ctx.rotate(s.r);
      ctx.strokeStyle = "#fffa80";
      ctx.lineWidth = 2.3;
      ctx.beginPath(); // Triangle
      ctx.moveTo(18, 0);
      ctx.lineTo(-12, 11);
      ctx.lineTo(-8, 0);
      ctx.lineTo(-12, -11);
      ctx.closePath();
      ctx.stroke();
      // Cabin
      ctx.beginPath();
      ctx.arc(4, 0, 4, 0, 2*Math.PI);
      ctx.strokeStyle="#0ff";
      ctx.lineWidth=1.3;
      ctx.stroke();
      ctx.restore();
    }
    function drawAsteroid(a) {
      ctx.save();
      ctx.translate(a.x, a.y);
      ctx.rotate(a.r || 0);
      ctx.strokeStyle = "#bbb";
      ctx.lineWidth = 2.1;
      ctx.beginPath();
      for(let i=0;i<8;i++){
        let ang = i*Math.PI/4;
        let rad = a.r*0.92 + Math.sin(a.r+i*1.32)*6 + (Math.random()-0.5)*4;
        ctx.lineTo(Math.cos(ang)*rad, Math.sin(ang)*rad);
      }
      ctx.closePath();
      ctx.stroke();
      ctx.restore();
    }
    function drawBullet(b){ ctx.fillStyle="#0ef"; ctx.beginPath(); ctx.arc(b.x,b.y,3,0,2*Math.PI); ctx.fill(); }
    function drawParticle(p){
      ctx.globalAlpha = p.a;
      ctx.fillStyle = p.c; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,2*Math.PI); ctx.fill();
      ctx.globalAlpha = 1;
    }
    function draw() {
      ctx.fillStyle="#181823"; ctx.fillRect(0,0,cvs.width,cvs.height);
      if(ship.alive) drawShip(ship);
      asteroids.forEach(drawAsteroid);
      bullets.forEach(drawBullet);
      particles.forEach(drawParticle);
      // HUD
      ctx.fillStyle="#0ff";
      ctx.font="16px monospace";
      ctx.fillText("Score: "+score,10,22);
    }
    function update(){
      // Ship motion
      if((keys['ArrowLeft']||keys['a'])) ship.r-=0.07;
      if((keys['ArrowRight']||keys['d'])) ship.r+=0.07;
      if((keys['ArrowUp']||keys['w'])) {
        ship.vx+=Math.cos(ship.r)*0.18; ship.vy+=Math.sin(ship.r)*0.18;
        // exhaust
        particles.push({x:ship.x-Math.cos(ship.r)*19, y:ship.y-Math.sin(ship.r)*19, r:2+cRnd(2), c:'#ff8f00', a:0.4+Math.random()*0.4, vx:-Math.cos(ship.r)*2+cRnd(0.8),vy:-Math.sin(ship.r)*2+cRnd(0.8)});
      }
      ship.x = (ship.x+ship.vx+cvs.width)%cvs.width;
      ship.y = (ship.y+ship.vy+cvs.height)%cvs.height;
      ship.vx*=0.993; ship.vy*=0.993;
      // Bullets
      bullets.forEach(b=>{
        b.x=(b.x+b.vx+cvs.width)%cvs.width;
        b.y=(b.y+b.vy+cvs.height)%cvs.height;
        b.life--;
      });
      for(let i=bullets.length-1;i>=0;i--) if(bullets[i].life<0) bullets.splice(i,1);
      // Asteroids
      asteroids.forEach(a=> {
        a.x=(a.x+a.vx+cvs.width)%cvs.width;
        a.y=(a.y+a.vy+cvs.height)%cvs.height;
        a.r+=0.012;
      });
      // Particles
      for(let i=particles.length-1;i>=0;i--){
        let p=particles[i];
        p.x+=p.vx||0; p.y+=p.vy||0; p.a-=0.018;
        if(p.a<0) particles.splice(i,1);
      }
      // Bullet/Asteroid collision
      for(let i=bullets.length-1;i>=0;i--) {
        let b=bullets[i], hitIdx=-1;
        for(let j=0;j<asteroids.length;j++) {
          let a=asteroids[j];
          let dx = (b.x - a.x), dy=(b.y - a.y), dist = Math.sqrt(dx*dx+dy*dy);
          if(dist<a.r) { hitIdx=j; break;}
        }
        if(hitIdx>-1){
          bullets.splice(i,1);
          let a=asteroids[hitIdx];
          score+=10*a.hp;
          document.getElementById('asteroidsScore').textContent = "Score: "+score;
          boom(a.x,a.y,a.r,asteroids[hitIdx].hp);
          // split
          if(a.r>27) {
            asteroids.push({x:a.x+8,y:a.y+8,r:a.r/1.5,vx:-a.vy,vy:a.vx,hp:a.hp-1});
            asteroids.push({x:a.x-8,y:a.y-9,r:a.r/1.7,vx:a.vy,vy:-a.vx,hp:a.hp-1});
          }
          asteroids.splice(hitIdx,1);
        }
      }
      // Ship/Asteroid collision
      for(let a of asteroids) {
        let dx=ship.x-a.x, dy=ship.y-a.y, dist=Math.sqrt(dx*dx+dy*dy);
        if(ship.alive && dist<a.r+13) {
          ship.alive=false; gameOver=true;
          boom(ship.x,ship.y,30,6);
          setTimeout(()=>{},400);
        }
      }
      // Respawn if win
      if(asteroids.length==0 && ship.alive) {
        spawnAsteroids(6+Math.floor(score/120));
      }
    }
    function cRnd(n){ return (Math.random()-0.5)*n;}
    function boom(x,y,R,n) {
      for(let i=0;i<6+Math.random()*8;i++)
        particles.push({x:x+cRnd(R),y:y+cRnd(R),r:2+cRnd(2),a:0.7,c:'#fff77c',vx:cRnd(2),vy:cRnd(2)});
      for(let i=0;i<n;i++)
        particles.push({x:x+cRnd(R),y:y+cRnd(R),r:6+aRnd(3),a:0.6,c:'#ff4b00',vx:cRnd(3.5),vy:cRnd(3.5)});
    }
    function aRnd(n){return Math.random()*n;}
    function shoot() {
      if(!ship.alive)return;
      let s=ship;
      bullets.push({x:s.x+Math.cos(s.r)*19,y:s.y+Math.sin(s.r)*19,vx:Math.cos(s.r)*6+s.vx,vy:Math.sin(s.r)*6+s.vy,life:40});
    }
    function gameLoop() {
      if(!gameOver) update();
      draw();
      if(gameOver) {
        ctx.fillStyle="#f44";
        ctx.font="28px monospace";
        ctx.textAlign="center";
        ctx.fillText("Game Over!",cvs.width/2, cvs.height/2);
        ctx.font="16px monospace";
        ctx.fillStyle="#fff";
        ctx.fillText("Press Restart",cvs.width/2, cvs.height/2+22);
        cancelAnimationFrame(frameId);
      } else frameId = requestAnimationFrame(gameLoop);
    }
    document.addEventListener('keydown',function(e){
      keys[e.key]=true;
      if(e.key===' '||e.key==='ArrowUp') shoot();
    });
    document.addEventListener('keyup',function(e){
      keys[e.key]=false;
    });

    // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –∏–∑ –∫–Ω–æ–ø–∫–∏ –∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    resetGame();
    window.resetGame = resetGame;
  </script>
</body>
</html>
